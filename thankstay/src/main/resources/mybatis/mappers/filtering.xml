<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.tt.Host.filteringDao">
	<select id="getLodgingsByFiltering" parameterType="int" resultType="com.tt.vo.FilteringVO">
		select
			A.lodging_bedroom bedroom,
			A.lodging_bathroom bathroom,
			A.lodging_singlebed singlebed,
			A.lodging_doublebed doublebed,
			C.filtering_kitchen kitchen,
			C.filtering_ac ac,
			C.filtering_heater heater,
			C.filtering_washer washer,
			C.filtering_drier drier,
			C.filtering_wifi wifi,
			C.filtering_parkingLot parkingLot,
			C.filtering_gym gym,
			C.filtering_pool pool,
			C.filtering_terrace terrace,
			C.filtering_garden garden,
			C.filtering_nearLake nearLake,
			C.filtering_nearBeach nearBeach,
			C.filtering_isRegistering isRegistering,
			C.filtering_standby standby,
			C.filtering_isApproved isApproved,
			C.filtering_isStopped isStopped
		from 
			Thxtay_lodging A, Thxtay_user B, Thxtay_filtering C
		where A.user_no = B.user_no 
        and A.user_no = #{value}
        <if test='bedroom != "0"'>
        	and bedroom like #{bedroom}
        </if>
        <if test='bathroom != "0"'>
        	and bathroom like #{bathroom}
        </if>
        <if test='singlebed != "0"'>
        	and singlebed like #{singlebed}
        </if>
        <if test='doublebed != "0"'>
        	and doublebed like #{doublebed}
        </if>
        <if test='kitchen != "0"'>
        	and kitchen like #{kitchen}
        </if>
        <if test='ac != "0"'>
        	and ac like #{ac}
        </if>
        <if test='heater != "0"'>
        	and heater like #{heater}
        </if>
        <if test='washer != "0"'>
        	and washer like #{washer}
        </if>
        <if test='drier != "0"'>
        	and drier like #{drier}
        </if>
        <if test='parkingLot != "0"'>
        	and parkingLot like #{parkingLot}
        </if>
        <if test='gym != "0"'>
        	and gym like #{gym}
        </if>
        <if test='pool != "0"'>
        	and pool like #{pool}
        </if>
        <if test='terrace != "0"'>
        	and terrace like #{terrace}
        </if>
        <if test='garden != "0"'>
        	and garden like #{garden}
        </if>
        <if test='nearLake != "0"'>
        	and nearLake like #{nearLake}
        </if>
        <if test='nearBeach != "0"'>
        	and nearBeach like #{nearBeach}
        </if>
        <if test='isRegistering != null'>
        	and isRegistering like #{isRegistering}
        </if>
        <if test='standby != null'>
        	and standby like #{standby}
        </if>
        <if test='isApproved != null'>
        	and isApproved like #{isApproved}
        </if>
        <if test='isStopped != null'>
        	and isStopped like #{isStopped}
        </if>
	</select>
</mapper>